<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>StarSpell Academy | Posts</title>
    <link rel="stylesheet" href="./styles.css" />
    <style>
      .post-content {
        white-space: pre-wrap;
      }
      .postLayout {
        display: grid;
        gap: 1.5rem;
      }
      .postForm {
        display: grid;
        gap: 1rem;
      }
      .postHeader {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        gap: 1rem;
      }
      .postComposerHeader {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: wrap;
      }
      .loreBoardHeader {
        text-align: center;
        position: relative;
        padding-bottom: 0.5rem;
        isolation: isolate;
      }
      .loreBoardHeader::after {
        content: "";
        position: absolute;
        inset: 0;
        margin: auto;
        width: 70%;
        max-width: 540px;
        height: 140%;
        background: radial-gradient(circle at 30% 30%, rgba(255, 216, 255, 0.18), transparent 55%),
          radial-gradient(circle at 70% 70%, rgba(255, 143, 222, 0.18), transparent 55%);
        filter: blur(18px);
        z-index: -1;
        opacity: 0.9;
        pointer-events: none;
      }
      .loreTitleWrap {
        display: inline-flex;
        align-items: center;
        gap: 0.9rem;
        padding: 0.85rem 1.7rem;
        border-radius: 999px;
        background: linear-gradient(120deg, rgba(255, 234, 255, 0.16), rgba(255, 90, 209, 0.08));
        border: 1px solid rgba(255, 180, 230, 0.4);
        box-shadow: 0 10px 30px rgba(61, 14, 86, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
        position: relative;
        overflow: hidden;
      }
      .loreTitleWrap::before,
      .loreTitleWrap::after {
        content: "";
        position: absolute;
        inset: -120%;
        background: conic-gradient(from 140deg, rgba(255, 255, 255, 0.28), rgba(255, 90, 209, 0.38), rgba(255, 255, 255, 0.28));
        opacity: 0.35;
        filter: blur(24px);
        animation: shimmer 12s linear infinite;
      }
      .loreTitleWrap::after {
        animation-duration: 16s;
        animation-direction: reverse;
      }
      .loreTitle {
        font-family: "Cinzel", "Times New Roman", Georgia, serif;
        letter-spacing: 1.4px;
        text-transform: uppercase;
        font-size: clamp(1.5rem, 1.6rem + 0.8vw, 2.3rem);
        margin: 0;
        color: #fdf2ff;
        text-shadow: 0 2px 18px rgba(255, 90, 209, 0.3), 0 0 24px rgba(118, 36, 147, 0.5);
        position: relative;
        z-index: 1;
      }
      .loreSigil {
        font-size: 1.25rem;
        color: #ffe3ff;
        filter: drop-shadow(0 0 8px rgba(255, 90, 209, 0.55));
        transform: translateY(-1px);
        position: relative;
        z-index: 1;
      }
      @keyframes shimmer {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="header" role="banner">
      <nav class="nav container" aria-label="Primary">
        <a class="brand" href="./index.html#top" aria-label="Home">
          <span class="brandText">StarSpell Academy</span>
        </a>

        <button class="iconBtn navToggle" id="navToggle" aria-expanded="false" aria-controls="navLinks">
          <span class="srOnly">Open menu</span>
          <span class="hamburger" aria-hidden="true"></span>
        </button>

        <div class="navLinks" id="navLinks">
          <a href="./quiz.html">Sorting quiz</a>
          <a href="./posts.html">Posts</a>
          <a href="./index.html#contact">Send an owl</a>
          <button id="logoutBtn" class="btn ghost" type="button" style="display: none">Log out</button>
          <a class="btn primary magentaGlow" href="./portal.html" data-auth-target="login-cta">Open the login portal</a>
        </div>
      </nav>
    </header>

    <main id="main" class="section">
      <div class="container postLayout">
        <div class="postHeader">
          <div>
            <h1>Posts</h1>
          </div>
          <div class="actions" style="gap: 0.5rem; align-items: center;">
            <p id="must-login" class="muted" aria-live="polite" style="margin: 0">You must be logged in to post.</p>
            <button id="share-post-btn" class="btn heroCta magentaGlow" type="button" aria-expanded="false">Share a post</button>
          </div>
        </div>

        <section class="card" id="composer-card" hidden>
          <div class="postComposerHeader">
            <div>
              <p class="kicker">Share a post</p>
              <p class="muted small">Write a short note for the Lore Board. (2000 characters max)</p>
            </div>
            <button class="btn ghost" type="button" id="close-composer">Close</button>
          </div>
          <form class="postForm" id="new-post-form">
            <label for="post-content" class="muted small">What would you like to share?</label>
            <textarea id="post-content" name="content" rows="4" maxlength="2000" required></textarea>
            <div class="actions">
              <button type="submit" class="btn primary" id="post-submit">Post</button>
            </div>
            <p id="post-status" class="muted small" aria-live="polite"></p>
          </form>
        </section>

        <section aria-live="polite" class="card">
          <div class="sectionHead loreBoardHeader">
            <div class="loreTitleWrap">
              <span class="loreSigil" aria-hidden="true">✶</span>
              <h2 class="loreTitle">Lore Board</h2>
              <span class="loreSigil" aria-hidden="true">✶</span>
            </div>
          </div>
          <div id="posts" class="postFeed"></div>
        </section>
      </div>
    </main>

    <script src="./script.js" defer></script>
    <script type="module" src="./js/posts.js"></script>
  </body>
</html>
