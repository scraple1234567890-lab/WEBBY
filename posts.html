<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>StarSpell Academy | Posts</title>
    <link rel="stylesheet" href="./styles.css" />
    <style>
      .post-content {
        white-space: pre-wrap;
      }
      .postLayout {
        display: grid;
        gap: 1.5rem;
      }
      .postForm {
        display: grid;
        gap: 1rem;
      }
      .postHeader {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        gap: 1rem;
      }
      .postComposerHeader {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 1rem;
        flex-wrap: wrap;
      }
    </style>
  </head>
  <body>
    <a class="skip-link" href="#main">Skip to content</a>

    <header class="header" role="banner">
      <nav class="nav container" aria-label="Primary">
        <a class="brand" href="./index.html#top" aria-label="Home">
          <span class="brandText">StarSpell Academy</span>
        </a>

        <button class="iconBtn navToggle" id="navToggle" aria-expanded="false" aria-controls="navLinks">
          <span class="srOnly">Open menu</span>
          <span class="hamburger" aria-hidden="true"></span>
        </button>

        <div class="navLinks" id="navLinks">
          <a href="./quiz.html">Sorting quiz</a>
          <a href="./posts.html">Posts</a>
          <a href="./index.html#contact">Send an owl</a>
          <button id="logoutBtn" class="btn ghost" type="button" style="display: none">Log out</button>
          <a class="btn primary magentaGlow" href="./portal.html" data-auth-target="login-cta">Open the login portal</a>
        </div>
      </nav>
    </header>

    <main id="main" class="section">
      <div class="container postLayout">
        <div class="postHeader">
          <div>
            <p class="kicker">Share your thoughts</p>
            <h1>Posts</h1>
          </div>
          <div class="actions" style="gap: 0.5rem; align-items: center;">
            <p id="must-login" class="muted" aria-live="polite" style="margin: 0">You must be logged in to post.</p>
            <button id="share-post-btn" class="btn primary" type="button" aria-expanded="false">Share a post</button>
          </div>
        </div>

        <section class="card" id="composer-card" hidden>
          <div class="postComposerHeader">
            <div>
              <p class="kicker">Share a post</p>
              <p class="muted small">Write a short note for the Lore Board. (2000 characters max)</p>
            </div>
            <button class="btn ghost" type="button" id="close-composer">Close</button>
          </div>
          <form class="postForm" id="new-post-form">
            <label for="post-content" class="muted small">What would you like to share?</label>
            <textarea id="post-content" name="content" rows="4" maxlength="2000" required></textarea>
            <div class="actions">
              <button type="submit" class="btn primary" id="post-submit">Post</button>
            </div>
            <p id="post-status" class="muted small" aria-live="polite"></p>
          </form>
        </section>

        <section aria-live="polite" class="card">
          <div class="sectionHead">
            <p class="kicker">Lore Board</p>
            <h2>Recent posts</h2>
            <p class="muted">See the newest Lore Board notes as soon as they are shared.</p>
          </div>
          <div id="posts" class="postFeed"></div>
        </section>
      </div>
    </main>

    <script src="./script.js" defer></script>
    <script type="module" src="./js/posts.js"></script>
  </body>
</html>
